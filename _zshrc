# -*- mode:sh -*-
#based on oh-my-zsh, @see https://github.com/robbyrussell/oh-my-zsh

ZSH=$HOME/.oh-my-zsh
ALIAS=$HOME/.aliases

# Look in ~/.oh-my-zsh/themes/
# ZSH_THEME="bira"
# ZSH_THEME="candy"
# ZSH_THEME="dst"
# ZSH_THEME="imajes"
# ZSH_THEME="steeef"
ZSH_THEME="nanotech"

# ~/.oh-my-zsh/plugins/
# perl npm
plugins=(ag pip debian svn vi-mode python brew git-extras gem)

# fpath=($ZSH/functions $ZSH/completions $fpath)

for config_file ($ZSH/lib/*.zsh); do
    source $config_file
done
unset config_file

is_plugin() {
    local base_dir=$1
    local name=$2
    test -f $base_dir/plugins/$name/$name.plugin.zsh \
        || test -f $base_dir/plugins/$name/_$name
}

# Add all defined plugins to fpath. This must be done
# before running compinit.
for plugin ($plugins); do
    if is_plugin $ZSH $plugin; then
        fpath=($ZSH/plugins/$plugin $fpath)
    else
        printf "$ZSH/plugins/$plugin not plugin\n"
    fi
done

# Load and run compinit
autoload -U compinit
compinit -i

for plugin ($plugins); do
    if [ -f $ZSH/plugins/$plugin/$plugin.plugin.zsh ]; then
        source $ZSH/plugins/$plugin/$plugin.plugin.zsh
    fi
done

source "$ZSH/themes/$ZSH_THEME.zsh-theme"

if [ -e $ALIAS ]; then
    source $ALIAS
fi

source ~/.linuxbrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ~/.linuxbrew/Cellar/zsh-history-substring-search/1.0.0/zsh-history-substring-search.zsh

# bind Ctrl-P/Ctrl-N for Emacs mode
bindkey -M emacs '^P' history-substring-search-up
bindkey -M emacs '^N' history-substring-search-down
# bind k and j for VI mode
bindkey -M vicmd 'k' history-substring-search-up
bindkey -M vicmd 'j' history-substring-search-down
