# -*- mode:sh -*-

ZSH=~/.oh-my-zsh

# ZSH_THEME="bira"
ZSH_THEME="nanotech"

source ~/.aliases

# ~/.oh-my-zsh/plugins/
plugins=(ag brew gem git-extras pip svn vi-mode z)
if [[ $OSTYPE == "linux-gnu" ]];then
    plugins=(${plugins} docker)
elif [[ $OSTYPE == "darwin"* ]];then
    plugins=(${plugins} vagrant)
fi

for plugin (${plugins}); do
    base_dir=${ZSH}/plugins/${plugin}
    if [[ -f ${base_dir}/${plugin}.plugin.zsh ]] || [[ -f ${base_dir}/_${plugin} ]]; then
        fpath=(${base_dir} ${fpath})
    else
        printf "${base_dir} not plugin\n"
    fi
done
unset base_dir

for plugin (${plugins}); do
    if [ -f $ZSH/plugins/$plugin/$plugin.plugin.zsh ]; then
        source $ZSH/plugins/$plugin/$plugin.plugin.zsh
    fi
done


autoload -Uz compinit
compinit -i

for config_file (${ZSH}/lib/*.zsh); do
    source ${config_file}
done
unset config_file


# sources

source "$ZSH/themes/${ZSH_THEME}.zsh-theme"

source ${MY_BREW_PREFIX}/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ${MY_BREW_PREFIX}/Cellar/zsh-history-substring-search/1.0.0/zsh-history-substring-search.zsh
## bind Ctrl-P/Ctrl-N for Emacs mode
bindkey -M emacs '^P' history-substring-search-up
bindkey -M emacs '^N' history-substring-search-down
## bind k and j for VI mode
bindkey -M vicmd 'k' history-substring-search-up
bindkey -M vicmd 'j' history-substring-search-down
bindkey -M vicmd '^f' vi-forward-word
bindkey -M vicmd '^f' vi-forward-blank-word

unset plugin
unset plugins
unset ZSH

# load executable
(pgrep -x rdm >/dev/null || rdm &>/tmp/rdm_answer &)
